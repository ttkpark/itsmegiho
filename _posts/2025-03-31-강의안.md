---
layout: post
title: "강의안"
date : 2025-03-31
categories: [SFU_project]
---
아래는 **대학생 2학년 수준**의 초급 개발자를 대상으로, **3개월(약 12주)** 동안 주5일 × 1일 4시간씩 진행하는 것을 가정한 **강의(워크숍) 계획서**입니다.  
- 이미 **WebRTC**의 기본(P2P, SDP, ICE)에 대해서는 학습을 완료했다는 전제하에,  
- **SFU(SFU 서버 + Android 클라이언트)**를 실제로 구현해보는 전 과정을 다룹니다.  
- 최종 목표: **안드로이드 앱에서 방(Room)을 생성하고 참여하며, SFU 서버를 통해 다자(가이드+참여자) 음성/오디오 통신**이 가능하도록 하는 프로토타입 완성.  
- 특이사항:  
  1. Windows 서버(개인용 서버 PC)를 활용해 SFU 서버를 상시 구동 가능.  
  2. 예산 50만 원 이하로, 라즈베리 파이 등 소형 컴퓨터 구매 후 테스트하는 단계도 포함 가능(선택 사항).  
  3. UI는 간단히, **Room 개설/참여/종료** 정도만 구현.  
  4. Git(또는 GitHub, GitLab 등)으로 코드 관리 습관을 함께 학습.

> **Tip**: 주당 5일 × 4시간 = 주 20시간, 12주면 총 240시간 정도의 학습 시간이 확보됩니다. 실제로는 학생의 이해도나 휴일/이벤트 등을 고려해 융통성 있게 조정 가능합니다.

---

## 전체 커리큘럼 개요

1. **[1~2주차] 오리엔테이션 & SFU 개념 잡기**  
   - Git/GitHub 기초, 기본 브랜치 전략 실습  
   - SFU의 개념, Mesh / MCU / SFU 차이 이해  
   - 오픈 소스 SFU(예: [Janus](https://janus.conf.meetecho.com/), [mediasoup](https://mediasoup.org/), [Pion](https://github.com/pion/webrtc) 등) 비교 및 선택  
   - Windows 서버 환경에서 SFU 빌드/설치, 간단 Hello World 수준의 테스트

2. **[3~4주차] SFU 서버 & 안드로이드 클라이언트 간 최소 연동**  
   - WebRTC 시그널링 이해 (서버 측에서 SDP/ICECandidate와 주고받기)  
   - Android Studio 프로젝트 생성, WebRTC 라이브러리 세팅  
   - SFU 서버와 1:1 음성 송수신 테스트 (P2P가 아닌 SFU 서버 경유)  
   - Git을 통한 소스 코드 버전 관리 실습

3. **[5~6주차] 멀티 유저(Room) 구조 설계**  
   - “방(Room)” 개념 도입: SFU 서버에서 “Room 생성 & 참여자 관리” 로직 구현  
   - 안드로이드 앱에서 “방 입장” / “방 나가기” UI 구현  
   - 서버에서 다자 연결 로직(가이드 1명+여러 명 동시 접속) 실습  
   - 간단한 텍스트 채팅 or 로깅 기능 추가 (시그널링 상태 확인 용)

4. **[7~8주차] 안정화 및 트러블슈팅**  
   - 실제 네트워크 환경(사설 IP, 방화벽, NAT 등)에서 SFU 연결 이슈 해결  
   - STUN/TURN 서버 설정 (Windows 서버/별도 프리 TURN 서버)  
   - 음성 품질 테스트(Opus 코덱 비트레이트, 패킷 손실 대응 등)  
   - 에러 핸들링, 예외 처리, 재접속 로직 보강

5. **[9~10주차] 고급 기능 & 소형 컴퓨터 배포(선택 과제)**  
   - **(선택)** 라즈베리 파이 등 소형 컴퓨터로 SFU 서버 이식/테스트  
   - 서버 성능 측정(동시 접속자 10명, 20명 등 부하 테스트)  
   - 음소거/발언권 관리 기능(‘가이드 발언’, ‘참가자 질문’ 등)  
   - Room 목록, 초대 링크 생성 등 간단한 서비스화 기능

6. **[11~12주차] 최종 프로젝트 / 시연**  
   - 안드로이드 클라이언트 + SFU 서버 + Windows 서버 환경 종합 시연  
   - 최적화(성능, UI/UX), 버그 수정, 문서화  
   - **Git**을 사용한 최종 릴리스 버전 태깅 & 발표  
   - (필요 시) 팀별/개인별 프로젝트 확장 아이디어 공유

---

## 주차별 상세 계획 (주 5일 × 4시간)

### Week 1~2: “기초 다지기 & SFU 개념”

- **Day 1~2**: 
  - **Git** 기본 사용법: 로컬 저장소/원격 저장소, push/pull, branch, merge 실습  
  - Windows 서버 환경에 프로젝트 폴더를 만들어 관리하는 연습  
- **Day 3**: 
  - WebRTC 복습: ICE/SDP/코덱 용어 정리, P2P와 SFU의 차이  
  - SFU 구조(Selective Forwarding), MCU·Mesh와 비교  
- **Day 4~5**:  
  - **오픈 소스 SFU** 후보(Janus, Mediasoup, Pion 등) 비교 검토  
  - **결정 & 환경 설정**: 예) Windows 서버에 Janus 혹은 Mediasoup 설치 시도  
  - 실제 실행(Hello World Test): SFU 서버 구동해보고, 내장 Demo 페이지(또는 Admin 콘솔)로 접속 테스트

> **성과물**: SFU 서버를 로컬에서 띄워보고, “서버 구동 성공” 로그 확인

---

### Week 3~4: “SFU 서버와 Android 간 1:1 오디오 테스트”

- **Day 1**:  
  - 안드로이드 스튜디오 프로젝트 생성, WebRTC 라이브러리(예: [google-webrtc](https://github.com/google/ExoPlayer/tree/release-v2/extensions/webrtc), Pion Android 등) 빌드/세팅  
- **Day 2**:  
  - 시그널링 구조 설계: (1) 안드로이드 → (2) SFU 서버(REST/웹소켓 등) → (3) SDP/ICE Candidate 교환  
  - Firebase Realtime DB나 Socket.io 등 편리한 시그널링 방식을 선택해도 좋음  
- **Day 3~4**:  
  - “버튼 누르면 Connect” → 서버에서 SDP Offer/Answer 교환 → ICE Candidate 처리 → 오디오 스트림 송수신  
  - **1:1** 연결(클라이언트 1명 / 서버 측 1명 세션) 성공 테스트  
  - Git Commit & Push로 버전관리 (예: `v0.1-1to1-audio-test`)
- **Day 5**:  
  - 간단한 마이크/스피커 테스트(에코, 잡음, 볼륨조절)  
  - 문제 발생 시 로그 분석(안드로이드 Logcat / SFU 콘솔 로그)  
  - 주차별 정리 세션

> **성과물**: Android 앱에서 SFU와 오디오 전송 가능(1:1 구조). 소스코드 Git으로 관리.

---

### Week 5~6: “방(Room) 개념 & 다자 연결”

- **Day 1**:  
  - **Room 개념** 논의: 방 ID, Host(가이드), Guest(참여자) 구분  
  - SFU 서버 수정/설정(‘Room’을 인메모리로 관리하거나, Janus Plugin 설정 등)  
- **Day 2~3**:  
  - 안드로이드 앱: “방 개설” / “방 목록 조회” / “방 입장” 기능 구현 (UI는 단순)  
  - 서버 측에서 해당 Room으로 Pub/Sub를 라우팅  
  - 초기에는 다수가 접속해도, 일단 모든 음성 스트림이 서버에 연결만 되는 구조
- **Day 4~5**:  
  - **멀티 유저 연결 테스트**: 가상 에뮬레이터나 여러 실제 기기를 통해 2~3명 동시 연결 시도  
  - 서버 콘솔 로그로 누가 들어왔는지/나갔는지 확인  
  - 음성이 **동시에 들어올 때**(다자) SFU가 잘 포워딩하는지 확인

> **성과물**: “가이드가 방 만들고, 여러 사용자가 방에 들어와 동시에 음성 통신” 가능한 초기 버전.

---

### Week 7~8: “품질·안정화 & 트러블슈팅”

- **Day 1**:  
  - NAT/방화벽 문제가 있는 환경(집·학교)에서 연결 안 될 때 → **STUN/TURN** 설정  
  - Windows 서버에 [coturn](https://github.com/coturn/coturn) 설치하거나, 무료 TURN 서비스(제공 여부 제한적)  
- **Day 2~3**:  
  - **음성 품질 튜닝**: Opus 코덱 비트레이트, 샘플레이트, 패킷화 간격(20ms/40ms) 바꿔가며 테스트  
  - 패킷 유실(오디오 끊김)에 대한 로깅, 재접속 로직(클라이언트 측)  
- **Day 4**:  
  - 예외 처리: 연결 중 타임아웃, 서버 종료 시, 앱 강제 종료 시 어떻게 처리하는지  
  - 안드로이드에서 서비스(백그라운드)로 동작하도록 설정할지 여부 검토(선택)
- **Day 5**:  
  - 문제 해결 공유, Wiki/GitHub Issues 정리  
  - 현재 버전 릴리스(`v0.2-room-stable`)  
  - 팀별 코드 리뷰

> **성과물**: 다양한 네트워크 환경에서 SFU 연결 안정화, TURN 적용, 음성 품질(끊김 최소화).

---

### Week 9~10: “부가 기능 & 소형 컴퓨터 배포(선택)”

- **(선택 과제) 소형 컴퓨터 라즈베리 파이 등 사용**  
  - **Day 1~2**: 라즈베리 파이 등 구매(예산 50만 원 이하 범위 내), OS 설치(Raspberry Pi OS 등), 네트워크 연결  
  - **Day 3**: SFU 서버 코드를 라즈베리 파이에 빌드/설치  
  - **Day 4~5**: 동일한 Room 기능을 라즈베리 파이 SFU로 구동해보고, 실제 동시 접속자 테스트(2~5명 등)

- **(기본 과정) 고급 기능**  
  - **가이드 전용 UI**: 참여자 음소거/해제, 공지 방송 등  
  - **초대 링크** 생성: “`http://서버주소/join?roomId=xxx`” 형태  
  - **오디오 UI**: 현재 말하고 있는 사람 표시(토크 디텍션)

> **성과물**: 1) 라즈베리 파이 SFU 시연, 또는 2) 고급 기능 추가로 실제 투어 시뮬레이션 가능.

---

### Week 11~12: “최종 프로젝트 & 시연”

- **Day 1~2**:  
  - UI/UX 정리: 최소한의 디자인(방 목록, 방 참여, 음소거 버튼 등)  
  - 프로젝트 문서화 (Readme, 사용 가이드, TroubleShooting 팁 등)
- **Day 3**:  
  - **부하 테스트**: 최대 5명, 10명, 15명 정도 모아서 동시 통화 가능 여부 확인  
  - 서버 CPU/RAM 모니터링, 끊김 발생 시 원인 분석
- **Day 4**:  
  - 최종 버그 수정 & 최적화 → `v1.0-final` 태깅  
  - 발표(시연): 가이드 폰, 학생들 폰(청취자) 동시에 연결해 투어 가이드 시뮬레이션
- **Day 5**:  
  - 성과물 발표 & 피드백 세션  
  - 추후 확장 아이디어 브레인스토밍 (영상 추가, 화면 공유 등)

> **최종 성과물**:  
> - 안드로이드 앱: **방 생성/입장/나가기** → SFU 서버 통해 **다자 음성 통신**  
> - Windows 서버(또는 라즈베리 파이) 상에서 SFU 구동  
> - Git을 통한 버전 관리, 문서화, 데모 시연

---

## 강의 전반의 특징 & 권장 사항

1. **Git/GitHub 적극 활용**  
   - 초급 개발자가 꼭 익혀야 할 협업 필수 도구.  
   - 매일 실습 후 commit/push → 일주일 단위로 태그(Release) → 주차별 버전 남기기.

2. **학습자 이해도에 따른 탄력적 운영**  
   - 2학년 수준이라곤 해도, WebRTC 기초가 이미 있다면 조금 빠르게 진행 가능.  
   - SFU 서버 설정(특히 Janus/Mediasoup)은 OS 종속적 이슈나 빌드 에러가 발생할 수 있으므로, 한두 번 정도 예비 시간을 잡아두는 게 좋음.

3. **실습 위주 진행**  
   - 강의 4시간 중 최소 2시간은 실제 코딩/실행/디버깅.  
   - 이론 설명(슬라이드) 후 바로 실습(코드 작성) → 문제 발생 시 공동 해결 → Git 커밋 & 정리.

4. **테스트 기기 환경**  
   - 안드로이드 스마트폰/태블릿(2~3대 이상), 또는 에뮬레이터 + 1대 실제 기기.  
   - SFU 서버는 Windows 서버 + (옵션) 라즈베리 파이.  
   - 네트워크는 가급적 유선(서버) + Wi-Fi(클라이언트).  
   - NAT 통과, 공인 IP 혹은 포트포워딩 설정 필수.

---

## 결론

위 커리큘럼을 따르면, **3개월(약 12주)** 동안 초급 개발자라도 단계적으로 SFU 서버 개념을 이해하고, 안드로이드 앱에서 음성 통신이 가능한 **Room 기반 프로토타입**을 완성할 수 있습니다.  
- **주차별 핵심 목표**와 **구체적 실습 항목**을 설정해, 매주 성취감을 느끼도록 구성했습니다.  
- Git을 통한 버전 관리, Windows 서버를 활용한 실제 서비스 환경 구축, 최종적으로 라즈베리 파이 등 **소형 컴퓨터로 확장** 시험까지 가능하도록 설계되었습니다.  

이 과정을 모두 마치면, 학생들은 **WebRTC SFU 구조** 전반과 **Android 클라이언트-SFU 서버 연동**에 대한 확실한 경험을 쌓고, 이를 바탕으로 간단한 실서비스(예: 투어 가이드 앱) 형태로 발전시킬 수 있을 것입니다. 

별점 최고를 받을 만한 탄탄한 교육 커리큘럼으로 활용해 보시길 바랍니다!