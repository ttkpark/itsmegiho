---
layout: post
title: "Week 3 Day 1 â€“ Room(ë°©) êµ¬ì¡° ì„¤ê³„, ë©€í‹° ìœ ì € ì—°ê²° ì´í•´, Room UI ê¸°íš"
date : 2025-04-19
categories: [SFU_project]
---
# Week 3 Day 1 â€“ Room(ë°©) êµ¬ì¡° ì„¤ê³„, ë©€í‹° ìœ ì € ì—°ê²° ì´í•´, Room UI ê¸°íš

ë“œë””ì–´ Week 3ì…ë‹ˆë‹¤!  
ì´ì œ ìš°ë¦¬ëŠ” **ë‹¤ì ì—°ê²° êµ¬ì¡°**ì— ì§„ì…í•©ë‹ˆë‹¤.  
ì˜¤ëŠ˜ì€ ê·¸ ì‹œì‘ìœ¼ë¡œ Janusì˜ `VideoRoom` ë˜ëŠ” `AudioBridge` í”ŒëŸ¬ê·¸ì¸ì„ í™œìš©í•˜ì—¬  
**Room(ë°©)** ê°œë…ì„ ì„¤ê³„í•˜ê³ , **ê°€ì´ë“œ â†” ì°¸ì—¬ì êµ¬ì¡°**, ì•ˆë“œë¡œì´ë“œ ì•±ì— ë§ëŠ” **ë°© ìƒì„±/ì°¸ì—¬ UI ê¸°íš**ì„ ì‹œì‘í•©ë‹ˆë‹¤.

---

## âœ… ì˜¤ëŠ˜ì˜ ëª©í‘œ

1. **Room êµ¬ì¡° ì„¤ê³„**: ë°© ê°œë…, ì—­í• (ê°€ì´ë“œ/ì°¸ì—¬ì) êµ¬ë¶„, ë™ì  ì…ì¥/í‡´ì¥ ì²˜ë¦¬ ì´í•´  
2. **Janus Plugin ì´í•´**: AudioBridge(ë˜ëŠ” VideoRoom)ì˜ ì—­í•  íŒŒì•…  
3. **Android UI ê¸°íš**: ë°© ë§Œë“¤ê¸° / ì°¸ì—¬í•˜ê¸° í™”ë©´ ë ˆì´ì•„ì›ƒ ê¸°íš ë° ìƒíƒœ íë¦„ ì„¤ê³„  
4. Git ë¸Œëœì¹˜ ìƒì„±, ì´ˆê¸° ì„¤ê³„ ì»¤ë°‹

---

## 1. ì´ë¡ 

---

### ğŸ§± 1.1 â€œRoomâ€ ì´ë€?

WebRTCì—ì„œ Roomì€ **ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼ì„ ì¤‘ê³„í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì ì¸ ê³µê°„**ì…ë‹ˆë‹¤.  
JanusëŠ” ì´ë¥¼ ìœ„í•œ ë‘ ê°€ì§€ ëŒ€í‘œ Pluginì„ ì œê³µí•©ë‹ˆë‹¤:

| Plugin | íŠ¹ì§• |
|--------|------|
| `janus.plugin.videoroom` | ë¹„ë””ì˜¤ ì¤‘ì‹¬, Publisher/Subscriber êµ¬ì¡°, í…ìŠ¤íŠ¸ ì±„íŒ… ê°€ëŠ¥  
| `janus.plugin.audiobridge` | ì˜¤ë””ì˜¤ ë¯¹ì‹± ì¤‘ì‹¬, ì°¸ì—¬ì ë™ì‹œ ì†¡ì‹  ê°€ëŠ¥, ë‹¨ìˆœí•œ ë°© êµ¬ì„±

> ğŸ¯ ìš°ë¦¬ëŠ” ì˜¤ë””ì˜¤ ì¤‘ì‹¬ì˜ êµ¬ì¡°ì´ë¯€ë¡œ, ê¸°ë³¸ì ìœ¼ë¡œ **AudioBridge**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

---

### ğŸ”„ 1.2 AudioBridge êµ¬ì¡° ìš”ì•½

```text
[ User A ] --\
[ User B ] ----> Room 123 --> [ Janus SFU (AudioBridge Plugin) ] --> ë¯¹ì‹± â†’ ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ì†¡ì¶œ
[ User C ] --/
```

- ì„œë²„ê°€ **ëª¨ë“  ì‚¬ìš©ìì˜ ì˜¤ë””ì˜¤ë¥¼ ë¯¹ì‹±**í•˜ì—¬ ê° ì‚¬ìš©ìì—ê²Œ ì „ì†¡
- **ì—­í• **ì„ ì§ì ‘ êµ¬ë¶„í•˜ì§„ ì•Šì§€ë§Œ, í´ë¼ì´ì–¸íŠ¸ì—ì„œ UI/ê¶Œí•œì„ í†µí•´ êµ¬í˜„ ê°€ëŠ¥

---

## 2. ì‹¤ìŠµ ì¤€ë¹„

---

### âœ… Step 1. Git ë¸Œëœì¹˜ ìƒì„±

```bash
git checkout develop
git pull
git checkout -b feature/room-structure-design
```

---

## 3. Janus AudioBridge Plugin ë¶„ì„

---

### ğŸ” Janus ê³µì‹ ë¬¸ì„œ ì°¸ì¡°

ğŸ”— [AudioBridge Docs (Meetecho)](https://janus.conf.meetecho.com/docs/audiobridge.html)

---

### ğŸ’¡ ì£¼ìš” ì‹œê·¸ë„ë§ íë¦„ ìš”ì•½

| ìš”ì²­ ì¢…ë¥˜ | ëª©ì  |
|-----------|------|
| `{"request":"create"}` | ìƒˆë¡œìš´ ë°© ìƒì„± (ê´€ë¦¬ì ê¶Œí•œ í•„ìš” ì‹œ ì„œë²„ë‹¨ ì„¤ì •)  
| `{"request":"list"}` | ì„œë²„ì— ìˆëŠ” ë°© ëª©ë¡ ì¡°íšŒ  
| `{"request":"join", "room":1234}` | íŠ¹ì • ë°©ì— ì°¸ê°€  
| `{"request":"configure", "muted":true}` | ìŒì†Œê±° ì—¬ë¶€ ì„¤ì •  
| `{"request":"leave"}` | ë°© ë‚˜ê°€ê¸°  

---

### âœ… ìš”ì²­ ì˜ˆì‹œ: ë°© ìƒì„± (ì„ íƒì‚¬í•­)

```json
{
  "janus": "message",
  "transaction": "abc123",
  "session_id": <session_id>,
  "handle_id": <handle_id>,
  "body": {
    "request": "create",
    "room": 1234,
    "description": "Tour Guide Room",
    "secret": "adminpass",
    "audiolevel_ext": true
  }
}
```

> â— ë³´í†µ ì„œë²„ì—ì„œ ë¯¸ë¦¬ ë°©ì„ ìƒì„±í•˜ê±°ë‚˜, ì„œë²„ì— ê¶Œí•œ ì—†ì´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ë„ ìˆìŒ (ë³´ì•ˆ ê³ ë ¤ í•„ìš”)

---

### âœ… ìš”ì²­ ì˜ˆì‹œ: ë°© ì°¸ì—¬

```json
{
  "janus": "message",
  "transaction": "abc123",
  "session_id": <session_id>,
  "handle_id": <handle_id>,
  "body": {
    "request": "join",
    "room": 1234,
    "display": "user_nickname"
  }
}
```

> ì‘ë‹µìœ¼ë¡œ `"participants"` ì •ë³´ ìˆ˜ì‹  ê°€ëŠ¥ â†’ UIì—ì„œ ì¸ì› í‘œì‹œ ê°€ëŠ¥

---

## 4. Android ì•± êµ¬ì¡° ì„¤ê³„

---

### âœ… Step 1. Room ì…ì¥ í™”ë©´ UI ê¸°íš

| ìš”ì†Œ | ì„¤ëª… |
|------|------|
| Room ID ì…ë ¥ | ì°¸ê°€í•  ë°© ë²ˆí˜¸ ì…ë ¥  
| ë‚´ ë‹‰ë„¤ì„ ì…ë ¥ | Janusì— í‘œì‹œë  ì´ë¦„ (`"display"`)  
| ì—­í•  ì„ íƒ (ì˜µì…˜) | ê°€ì´ë“œ or ì°¸ì—¬ì (ì„œë²„ëŠ” ì¸ì§€ ëª»í•˜ë¯€ë¡œ, í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¡œì»¬ ì²˜ë¦¬)  
| ì°¸ì—¬ ë²„íŠ¼ | ë°© ì—°ê²° ì‹œì‘

---

### âœ… Step 2. UI êµ¬ì¡° ì„¤ê³„ (Jetpack Compose)

#### `RoomEnterScreen.kt`

```kotlin
@Composable
fun RoomEnterScreen(onJoin: (roomId: Int, nickname: String, isGuide: Boolean) -> Unit) {
    var roomId by remember { mutableStateOf("") }
    var nickname by remember { mutableStateOf("") }
    var isGuide by remember { mutableStateOf(false) }

    Column(modifier = Modifier.padding(24.dp)) {
        Text("ğŸ§ ë°©ì— ì°¸ì—¬í•˜ê¸°", style = MaterialTheme.typography.headlineSmall)

        OutlinedTextField(
            value = roomId,
            onValueChange = { roomId = it },
            label = { Text("Room ID") },
            modifier = Modifier.fillMaxWidth()
        )

        OutlinedTextField(
            value = nickname,
            onValueChange = { nickname = it },
            label = { Text("ë‚´ ì´ë¦„") },
            modifier = Modifier.fillMaxWidth()
        )

        Row(verticalAlignment = Alignment.CenterVertically) {
            Checkbox(checked = isGuide, onCheckedChange = { isGuide = it })
            Text("ê°€ì´ë“œë¡œ ì…ì¥")
        }

        Button(
            onClick = {
                onJoin(roomId.toIntOrNull() ?: 0, nickname, isGuide)
            },
            modifier = Modifier.fillMaxWidth()
        ) {
            Text("ë°© ì°¸ì—¬í•˜ê¸°")
        }
    }
}
```

---

### âœ… Step 3. ë‚´ë¶€ ìƒíƒœ íë¦„ ì„¤ê³„

- ì‚¬ìš©ìê°€ Room ID, ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ë©´ â†’ `join` ë©”ì‹œì§€ë¥¼ ì „ì†¡
- ì‘ë‹µì—ì„œ `"participants"` ë¦¬ìŠ¤íŠ¸ í™•ì¸ ê°€ëŠ¥
- ì¶”í›„ UIì—ì„œ ê°€ì´ë“œ/ì°¸ì—¬ì ë¶„ë¦¬ ë° í†µì œ ê°€ëŠ¥

---

## 5. Git ì •ë¦¬

```bash
git add .
git commit -m "Room êµ¬ì¡° ì„¤ê³„ ë° ì…ì¥ UI ê¸°íš êµ¬í˜„"
git push -u origin feature/room-structure-design
```

---

## 6. ìˆ™ì œ(í€´ì¦ˆ)

1. **AudioBridge Plugin**
   - AudioBridgeì™€ EchoTest í”ŒëŸ¬ê·¸ì¸ì˜ ê·¼ë³¸ì  ì°¨ì´ì ì€ ë¬´ì—‡ì¸ê°€ìš”?

2. **Room ì„¤ê³„**
   - Client ì¸¡ì—ì„œ ê°€ì´ë“œ/ì°¸ì—¬ìë¥¼ ì–´ë–»ê²Œ êµ¬ë¶„í•  ìˆ˜ ìˆì„ê¹Œìš”?

3. **Compose UI ì„¤ê³„**
   - ì™œ `remember`ë¥¼ ì‚¬ìš©í•´ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ë‚˜ìš”?

(ë‹µì•ˆì€ `docs/Week3-Day1-quiz.md`ì— ì‘ì„± í›„ ì»¤ë°‹)

---

## 7. ì½”ë©˜íŠ¸/íŒ

- AudioBridgeëŠ” â€œëª¨ë‘ê°€ ì˜¤ë””ì˜¤ë¥¼ ì†¡ì‹ í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°â€ì…ë‹ˆë‹¤. ì•±ì—ì„œ ìŒì†Œê±°ë‚˜ ì†¡ì¶œ ê¶Œí•œì„ ë¡œì»¬ì—ì„œ êµ¬ë¶„í•´ì•¼ í•©ë‹ˆë‹¤.
- ë‹‰ë„¤ì„(`"display"`)ì€ ì¶”í›„ UIì— í‘œì‹œë˜ë©°, ì°¸ì—¬ì ëª©ë¡ ê´€ë¦¬ì— í™œìš©ë©ë‹ˆë‹¤.
- ì‹¤ì œ Room ìƒì„±ì€ ë³´ì•ˆìƒ ì„œë²„ì—ì„œë§Œ í—ˆìš©í•˜ëŠ” ê²Œ ì¼ë°˜ì ì…ë‹ˆë‹¤.

---

## âœ… ë§ˆë¬´ë¦¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] AudioBridge êµ¬ì¡° ë° ì‹œê·¸ë„ë§ íë¦„ ì´í•´  
- [x] Room ID / ë‹‰ë„¤ì„ ì…ë ¥ UI ì„¤ê³„ ì™„ë£Œ  
- [x] ì°¸ì—¬ ë²„íŠ¼ í´ë¦­ â†’ `join` ë©”ì‹œì§€ ì„¤ê³„ ì¤€ë¹„  
- [x] Git ë¸Œëœì¹˜ ì •ë¦¬ ë° ì´ˆê¸° ì»¤ë°‹ ì™„ë£Œ

---

ğŸ“Œ **ë‹¤ìŒ ì‹œê°„(Week 3 Day 2)**ì—ëŠ” Android ì•±ì—ì„œ ì‹¤ì œë¡œ AudioBridge ë°©ì— ì ‘ì†í•˜ê³ ,  
**Publisher ë“±ë¡ ë° ì˜¤ë””ì˜¤ ì†¡ì‹ /ìˆ˜ì‹  í…ŒìŠ¤íŠ¸**ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.  
ë“œë””ì–´ ì—¬ëŸ¬ ì‚¬ìš©ìê°€ í•˜ë‚˜ì˜ ë°©ì— ëª¨ì—¬ ì†Œí†µí•˜ëŠ” ì‹œëŒ€ê°€ ì—´ë¦½ë‹ˆë‹¤. ğŸ’¬ğŸ”Š  